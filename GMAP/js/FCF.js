function C_FCF(){this.ary_shamei_ = new Array("A社", "B社", "C社");this.ary_kingaku_ = new Array([100,50,20,40,0,"???"],[100,50,20,40,0,"???"],[100,50,20,40,0,"???"]);this.ary_itmes_given_ = new Array("EBIT:支払金利前税引前利益","t:法人税率(%)","D:減価償却費","C:設備投資","⊿WC:増加運転資本");this.ary_itmes_anser_ = new Array("FCF:フリー・キャッシュフロー");this.ary_table_color_ = new Array("#A0A0A0","#FFFFFF");};C_FCF.prototype.sttc_MakeQuestion = function(){var ary_base= [ 40, 50, 3, 6, -3 ];var ary_div= [ 11,  1, 4, 3,  7 ];var ary_scale= [ 10,  1, 1, 1,  1 ];var rd;ns_XorShift.Init();var times = 1;for( i = 0; i < times; i ++ ){ns_XorShift.GetRand();}for( i = 0; i < this.ary_itmes_given_.length; i ++ ){for( s = 0; s < this.ary_shamei_.length; s ++ ){rd = ns_XorShift.GetRand() % ary_div[ i ];this.ary_kingaku_[ s ][ i ] = ary_base[ i ] + ary_scale[ i ] * rd;}}};C_FCF.prototype.sttc_CalcFCF = function(){var free_cashflow;var ebit;var tax;var depreciation;var capx;var delta_wc;for( s = 0; s < this.ary_shamei_.length; s ++ ){ebit = this.ary_kingaku_[ s ][ 0 ];tax = this.ary_kingaku_[ s ][ 1 ] / 100;depreciation = this.ary_kingaku_[ s ][ 2 ];capx = this.ary_kingaku_[ s ][ 3 ];delta_wc = this.ary_kingaku_[ s ][ 4 ];free_cashflow = ebit * ( 1 - tax ) + depreciation - capx - delta_wc;this.ary_kingaku_[ s ][ 5 ] = free_cashflow;}};C_FCF.prototype.sttc_DispTable = function( flag_anser ){document.write( "<table border='1' >" );document.write( "<tr align='center' bgcolor='", this.ary_table_color_[0], "'>" );document.write( "<td>" );document.write( "</td>" );for( i = 0; i < this.ary_shamei_.length; i ++ ){document.write( "<td>", this.ary_shamei_[ i ], "</td>"  );}document.write( "</tr>" );for( i = 0; i < this.ary_itmes_given_.length; i ++ ){document.write( "<tr>" );document.write( "<td width='250' align='center' bgcolor='", this.ary_table_color_[ 1 ], "'>" );document.write( this.ary_itmes_given_[ i ] );document.write( "</td>" );for( s = 0; s < this.ary_shamei_.length; s ++ ){document.write( "<td width='100' bgcolor='", this.ary_table_color_[ 1 ], "' align='right'>" );document.write( this.ary_kingaku_[ s ][ i ] );     document.write( "</td>" );}document.write( "</tr>" );}for( i = 0; i < this.ary_itmes_anser_.length; i ++ ){document.write( "<tr>" );document.write( "<td bgcolor='", this.ary_table_color_[ 1 ], "' align='center'>" );document.write( this.ary_itmes_anser_[i] );document.write( "</td>" );var offset = this.ary_itmes_given_.length;for( s = 0; s < this.ary_shamei_.length; s ++ ){document.write( "<td bgcolor='", this.ary_table_color_[ 1 ], "' align='right'>" );document.write( "<div class='test_anser'>" );document.write( this.ary_kingaku_[ s ][ offset + i ] );     document.write( "</div>" );document.write( "</td>" );}document.write( "</tr>" );}document.write( "</table>" );};C_FCF.prototype.sttc_DispAnserText = function(){document.write( "<p><div class='test_anser'>" );document.write( "【 FCF 】<BR>" );document.write( "運転資本：事業に<u>必要な</u>資金。運転資本が増えると手元の現金が減る。<br>" );document.write( "</div></p>" );document.write( "<p><div class='test_anser'>" );document.write( "FCF = EBIT * ( 1 - t ) + D - C - ⊿WC<BR>" );document.write( "</div></p>" );}; C_FCF.prototype.Test_FCF = function( flag_anser ){this.sttc_MakeQuestion();if( flag_anser ){this.sttc_CalcFCF();}this.sttc_DispTable( flag_anser );if( flag_anser != 0 ){this.sttc_DispAnserText();}};
